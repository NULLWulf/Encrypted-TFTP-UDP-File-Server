<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Clien to Proxy Server Image Fetch</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.0.0/dist/chart.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
</head>
<body>
<div>
<div>
    <label for="image-url">Enter image URL:</label>
    <input type="text" id="image-url" name="image-url">
    <button onclick="fetchImage()">Fetch Image</button>
    <p>https://www.google.com/images/branding/googlelogo/1x/googlelogo_color_272x92dp.png</p>
    <p>https://rare-gallery.com/uploads/posts/577429-star-wars-high.jpg</p>
</div>
<div style="width: 500px;">
    <img id="image-container" src="" alt="Image">
</div>
<div class="section">
    <h2>Throughput Results in Mbps</h2>
    <canvas id="Network1" width="750px" height="500px"></canvas>
  </div>
</div>
<script>
  // Register the plugin to all charts:
  Chart.register(ChartDataLabels);
    function fetchImage() {
        const url = document.getElementById("image-url").value;
        fetch(`/getImage?url=${url}`)
            .then(response => response.blob())
            .then(blob => {
                const imageUrl = URL.createObjectURL(blob);
                document.getElementById("image-container").src = imageUrl;
            })
            .catch(error => console.error(error));
    }


    var wiredRttCtx = document.getElementById("Network1").getContext("2d");
    var Network1 = [0.76, 0.54, 0.76, 0.83];
    var Network2 = [3.66, 2.35, 4.12, 3.65];
    var Network1Name = "Laptop -> Pi";
    var Network2Name = "PI -> Moxie";
    

      var wiredRttChart = new Chart(wiredRttCtx, {
        plugins: [ChartDataLabels],
        type: "bar",
        data: {
          labels: ["Window 8, No Drops", "Window 8, Drops", "Window 16, No Drops", "Window 16, Drops"],
          datasets: [
            {
              label: Network1Name,
              data: Network1,
              backgroundColor: "rgba(255, 99, 132, 0.5)",
              borderColor: "rgba(255, 99, 132, 1)",
              borderWidth: 1,
                
            },
            {
              label: Network2Name,
              data: Network2,
              backgroundColor: "rgba(54, 162, 235, 0.5)",
              borderColor: "rgba(54, 162, 235, 1)",
              borderWidth: 1,
            },
          ],
        },
        options: {
          plugins: {
      // Change options for ALL labels of THIS CHART
      datalabels: {
        color: '#000000',
        anchor: 'end'
      }
    },
          responsive: false,
          legend: {
            position: "top",
          },
          title: {
            display: true,
            text: "Throughput (in Mbps)",
          },
          scales: {
            yAxes: [
              {
                scaleLabel: {
                  display: true,
                  labelString: "Throughput (in Mbps)",
                  color: "rgba(255, 99, 132, 1)",
                },
                ticks: {
                  beginAtZero: true,
              
                },
              },
            ],
            xAxes: [
              {
                scaleLabel: {
                  display: true,
                  labelString: "Variations",
                  color: "rgba(255, 99, 132, 1)",
                },
              },
            ],
          },
        },
      });
</script>
</body>
</html>
